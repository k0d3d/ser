.contentpanel
    .panel.panel-default
      .col-md-2
        .row
          .form-content(style="margin-bottom: 30px")
            form(name="searchform", novalidate, ng-submit="search_orders(search)")
                .form-group
                  p.form-control-static Filter Orders
                .form-group
                  label.control-label Order Id
                  input.input-large.form-control(type="search", ng-model="search.orderId", placeholder="orders id...")
                .form-group
                  label.control-label Hospital Id
                  input.input-large.form-control(type="search", ng-model="search.hospitalId", placeholder="hospital name...")
                .form-group
                  label.control-label Item Name
                  input.input-large.form-control(type="search", ng-model="search.itemId.itemName", placeholder="item name...")
                .form-group
                  label.control-label Supplier Name
                  input.input-large.form-control(type="search", ng-model="search.orderSupplier.name", placeholder="Supplier")
                .form-group
                  label.control-label Date
                  input.form-control.input-large(type="date", ng-model="search.orderDate")
                //- .form-group
                //-   button.btn.btn-primary(type="submit") Search
      .col-md-10
        .panel.panel-default()
            .panel-heading(style="height: 70px")
              .row
                .col-md-8
                  button.btn-white.btn Show All Orders
                  button.btn-warning.btn(ng-click="showP()") Show Priority Orders
                .col-md-4
                  div.pull-right
                    | Showing {{funnel.length}} Order(s)
            .panel-body(style="padding: 0px")
              table.table.table-hover.table-bordered(style="margin-top: 30px")
                thead
                  tr
                    th Order Id
                    th Drug Name
                    th Amount
                    th Date / Time
                    th Supplier
                    th Status
                    th Hospital
                    th
                tbody
                  //- tr(ng-repeat="cmp in funnel = (orders | filter: routeFilterParam)")
                  tr(ng-repeat="cmp in funnel = (orders | filter: search )")
                    td {{cmp.idmask}}
                    td
                      a(ng-href="/a/drugs/{{cmp.itemId._id}}/item") {{cmp.itemId.itemName}}
                    td {{cmp.orderAmount}}
                    td {{cmp.orderDate | date:medium}}
                    td
                      a(ng-href='/a/organization/people/{{cmp.orderSupplier.userId}}/person/2') {{cmp.orderSupplier.name}}
                    td {{cmp.status | orderState}}
                    td
                      a(ng-href='/a/organization/people/{{cmp.hospitalId.userId}}/person/5') {{cmp.hospitalId.name}}
                      span.label.label-success.pull-right(ng-show="cmp.eta") {{cmp.eta | moment}}
                    td
                      -if (userData.account_type !== 5)
                        button.btn.btn-warning.btn-xs(ng-click="toggleModal('manage-order-modal', cmp, $index);") Manage this
                      button.btn.btn-info.btn-xs(ng-click="get_status_updates(cmp); toggleModal('manage-order-updates', cmp.statusLog, $index)") Tracking
              //- .x-pagination(pagination="orders", page-to="page(pageNo, limit, cb)")
include ../widgets/order/manage-order-modal
include ../widgets/order/manage-order-updates
+manageOrderModal(userData.account_type)
+orderStatusUpdates()